apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "nft-event-processor.fullname" . }}
  labels:
    {{- include "nft-event-processor.labels" . | nindent 4 }}
data:
  config.yaml: |
    server:
      network: tcp
      address: localhost:8765

    event_processor_server:
      network: tcp
      address: autonomy.nft-event-processor.svc.cluster.local:8765
    
    store:
      dsn:
      cache_expiry: 24h
      log_level: 2
    
    log:
      level: debug
    
    sentry:
      dsn:
    
    indexer_store:
      db_uri:
      db_name:
    
    cadence:
      host_port: cadence-frontend.cadence.svc.cluster.local:7933
      domain: nft-indexer
      log_level: 0
    
    feed:
      endpoint: http://autonomy-event-feed.autonomy.svc.cluster.local:80
      api_token:
      debug: true
    
    account:
      db_uri:
    
    notification:
      endpoint: http://autonomy-notification.autonomy.svc.cluster.local:80

  dappetizer.feralfile.config.json: |
    {
      "indexing": {
        "fromBlockLevel": 2845033,
        "contractBoost": {
          "type": "tzkt",
          "apiUrl": "{{ .Values.serviceConfig.contractBoostUrl }}"
        },
        "contracts": [
          {
            "name": "FeralFileV1",
            "addresses": {{ .Values.serviceConfig.contractAddresses | toJson }}
          }
        ]
      },
      "tezosNode": {
        "url": "https://mainnet-tezos.autonomy.io"
      }
    }
  dappetizer.marketplace.config.json: |
    {
      "indexing": {
        "fromBlockLevel": 2845173,
        "contractBoost": {
          "type": "tzkt"
        },
        "contracts": [
          {
            "name": "fxhash",
            "addresses": [
              "KT1KEa8z6vWXDJrVqtMrAeDVzsvxat3kHaCE"
            ]
          },
          {
            "name": "hicetniuc",
            "addresses": [
              "KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton"
            ]
          },
          {
            "name": "versum",
            "addresses": [
              "KT1LjmAdYQCLBjwv4S2oFkEzyHVkomAf5MrW"
            ]
          },
          {
            "name": "fxhashv2",
            "addresses": [
              "KT1U6EHmNxJTkvaWJ4ThczG4FSDaHC21ssvi"
            ]
          }
        ]
      },
      "tezosNode": {
        "url": "https://mainnet-tezos.autonomy.io"
      }
    }
